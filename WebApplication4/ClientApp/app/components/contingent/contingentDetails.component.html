<h1>Contingent Details</h1>

<div [hidden]="editing">
    <div class="col-md-3"><b>Contingent Leader No:</b></div>
    <div class="col-md-3"> {{ contingent.contingentLeaderNo }} </div><br />

    <div class="col-md-3"><b>Males:</b></div>
    <div class="col-md-3"> {{ contingent.male }} </div><br />

    <div class="col-md-3"><b>Females:</b></div>
    <div class="col-md-3"> {{ contingent.female }} </div><br />

    <div class="col-md-3"><b>Arrived Males:</b></div>
    <div class="col-md-3"> {{ contingent.arrivedM }} </div><br />

    <div class="col-md-3"><b>Arrived Females:</b></div>
    <div class="col-md-3"> {{ contingent.arrivedF }} </div><br />

    <button mat-raised-button color="primary" (click)="edit();"> Edit </button>
    <button mat-button color="warn" (click)="delete();"> Delete </button>
</div>

<form [hidden]="!editing" class="form-horizontal">
    <div class="form-group">
        <label for="cl-input" class="col-sm-1 control-label">CL No:</label>
        <div class="col-sm-4"><input name="cl" [(ngModel)]="contingent.contingentLeaderNo" id="cl-input" type="text" class="form-control"></div>
    </div>

    <div class="form-group">
        <label for="male-input" class="col-sm-1 control-label">Males:</label>
        <div class="col-sm-4"><input name="male" [(ngModel)]="contingent.male" id="male-input" type="text" class="form-control"></div>
    </div>
    <div class="form-group">
        <label for="female-input" class="col-sm-1 control-label">Females:</label>
        <div class="col-sm-4"><input name="female" [(ngModel)]="contingent.female" id="female-input" type="text" class="form-control"></div>
    </div>
    <div class="form-group">
        <label for="arrivedM-input" class="col-sm-1 control-label">Arrived Males:</label>
        <div class="col-sm-4"><input name="arrivedM" [(ngModel)]="contingent.arrivedM" id="arrivedM-input" type="text" class="form-control"></div>
    </div>
    <div class="form-group">
        <label for="arrivedF-input" class="col-sm-1 control-label">Females:</label>
        <div class="col-sm-4"><input name="arrivedF" [(ngModel)]="contingent.arrivedF" id="arrivedF-input" type="text" class="form-control"></div>
    </div>
    <button mat-raised-button color="primary" (click)="save();" >Save</button>
    <button mat-raised-button color="warn" (click)="edit();"> Cancel </button>
</form>

<br />

<button mat-raised-button color="accent" [routerLink]="['/roomLayout/', contingent.contingentLeaderNo]">Allocate Rooms </button>

<br /><br />
<h3 *ngIf="(contingent)&&(contingent.roomAllocation)&&(contingent.roomAllocation.length>0)">Allocated Rooms</h3>
<ul *ngIf="(contingent)&&(contingent.roomAllocation)&&(contingent.roomAllocation.length>0)" class="list-group">
    <li *ngFor="let roomA of contingent.roomAllocation" class="list-group-item">
        <span><b>{{ roomA.room.location }} - {{ roomA.room.room1 }}</b> - {{ roomA.room.capacity}} </span>
        <span *ngIf="roomA.partial > 0">(partial, {{roomA.partial}})</span>
        <button style="float:right" mat-button color="warn" (click)="unallocateRoom(roomA);"><mat-icon>delete</mat-icon></button>
    </li>
</ul>

<h3 *ngIf="(id != '0')">People in this contingent</h3>

<p *ngIf="(!contingent.person)&&(id != '0')"><em>Loading...</em></p>

<div *ngIf="(contingent.person)&&(id != '0')" class='table-responsive' style="
                                    margin:10px;  
                                    box-shadow: 3px 3px 7px grey;">
    <table style="cursor:pointer;" class='table table-hover' *ngIf="contingent.person">
        <thead>
            <tr>
                <th>Name</th>
                <th>MI No.</th>
                <th>College</th>
                <th>Sex</th>
            </tr>
        </thead>    
        <tbody>
            <tr [routerLink]="['/personDetails/', person.mino]" *ngFor="let person of contingent.person">
                <td>{{ person.name }}</td>
                <td>{{ person.mino }}</td>
                <td>{{ person.college }}</td>
                <td>{{ person.sex }}</td>
            </tr>
        </tbody>
    </table>
</div>
